function PagLogin2(){this.construtor=function(){pagina.setTitle("Login"),this.montaPagHtml()},this.montaPagHtml=function(){if(pagina.getPagina().empty(),window.localStorage.getItem("usuario"))pagina.abrirPaginas("main");else{localStorage.removeItem("token"),localStorage.removeItem("usuario");var e=document.createElement("div");e.className="container";var a=document.createElement("div");a.className="row center",a.style.marginTop="1em";var t=document.createElement("div");t.className="col s12";var n=document.createElement("img");n.style.width="6em",n.src="images/obraIcon.png",n.className="responsive-img",t.appendChild(n),a.appendChild(t),e.appendChild(a);var l=document.createElement("div");l.className="row";var d=document.createElement("form");d.className="col s12";var i=document.createElement("div");i.className="row";var r=document.createElement("div");r.className="input-field col s12";var o=document.createElement("input");o.className="validate",o.type="email",o.id="email",o.style.color="#FFFFFF",o.autofocus,o.addEventListener("keyup",function(e){("Enter"==e.key||13==e.keyCode)&&$("#password").focus()}),r.appendChild(o);var c=document.createElement("label");c.htmlFor="email",c.appendChild(document.createTextNode("Email")),r.appendChild(c),i.appendChild(r),d.appendChild(i);var s=document.createElement("div");s.className="row";var m=document.createElement("div");m.className="input-field col s12";var p=document.createElement("input");p.className="validate",p.id="password",p.type="password",p.style.color="#FFFFFF",p.addEventListener("keyup",function(e){("Enter"==e.key||13==e.keyCode)&&pag.login(document.getElementById("email").value,document.getElementById("password").value)}),m.appendChild(p);var u=document.createElement("label");u.htmlFor="password",u.appendChild(document.createTextNode("Senha")),m.appendChild(u),s.appendChild(m),d.appendChild(s),l.appendChild(d),e.appendChild(l),pagina.getPagina().appendChild(e);var v=document.createElement("div");v.className="container";var g=document.createElement("div");g.className="row";var h=document.createElement("a");h.className="light-blue waves-effect waves-light btn-large btn-xl",h.style.height="44px",h.style.lineHeight="44px",h.appendChild(document.createTextNode("Entrar")),h.addEventListener("click",function(){pag.login(document.getElementById("email").value,document.getElementById("password").value)}),g.appendChild(h),v.appendChild(g);var f=document.createElement("div");f.className="row";var E=document.createElement("a");E.addEventListener("click",function(){pagina.abrirPaginas("selecionarPerfil")}),E.className="green waves-effect waves-light btn-large btn-xl",E.style.height="44px",E.style.lineHeight="44px",E.appendChild(document.createTextNode("Cadastre-se")),f.appendChild(E),v.appendChild(f);var C=document.createElement("div");C.className="row center";var y=document.createElement("div");y.className="col s12 center";var N=document.createElement("a");N.className="waves-effect waves-teal btn-flat white-text",N.appendChild(document.createTextNode("Esqueçeu seus dados?")),N.addEventListener("click",function(){pagina.abrirPaginas("redefinirSenha")}),y.appendChild(N),C.appendChild(y);var N=document.createElement("a");N.className="waves-effect waves-teal btn-flat white-text",N.appendChild(document.createTextNode("Voltar")),N.addEventListener("click",function(){pagina.abrirPaginas("login")}),y.appendChild(N),C.appendChild(y),v.appendChild(C),pagina.getPagina().appendChild(v)}this.login=function(e,a){var t=new Usuario;if(t.setEmail(e)&&t.setSenha(a)){var n=new HttpReq("post",pagina.apiUrl()+"usuario/entrar",function(e){if(e.err)alerta.abrirErro(e.err);else{var a=t.getSenha();if(t=new Usuario,"string"==typeof e&&(e=JSON.parse(e)),""!=e.err)alerta.abrirErro("Email ou senha incorretos.");else{t.json(e.result[0]),t.setSenhaSemVerificar(a);var n=new Token(e.result[1]);n.getSeq()?(localStorage.setItem("usuario",t.jsonString()),localStorage.setItem("token",n.jsonString()),pagina.abrirPaginas("main")):alerta.abrirErro("Algo deu errado. Tente novamente mais tarde.")}}});n.enviar("usuario="+t.jsonString())}else alerta.abrirErro("E-mail ou senha inválidos.")}},this.construtor()}