function PagMain(){this.construtor=function(){pagina.setTitle("Home"),setTimeout(function(){pag.montaPagHtml()},500)};var e,t,a,n,o,i;this.montaPagHtml=function(){if(e=new Array,t=new Array,a=new Array,n=new Array,o=new Array,i=new Array,window.localStorage.getItem("usuario")){var l=new Usuario;l.json(window.localStorage.getItem("usuario")),pagina.getPagina().empty();var d=document.createElement("main"),r=document.createElement("div");r.className="parallax-container container-big";var c=document.createElement("div");c.className="center col s12";var s=document.createElement("img");s.style.marginTop="1em",s.style.width="4em",s.style.height="4em",s.className="responsive-img",l.getFoto()?s.src=pagina.uploadedUserImages()+l.getFoto():s.src="images/fulano.png",c.appendChild(s),r.appendChild(c);var m=document.createElement("div");m.className="center col s12";var p=document.createElement("span");p.className="white-text",p.style.fontSize="1.4em";var u=l.getNome();u?0==u.length&&(u="Fulano"):u="Fulano",p.appendChild(document.createTextNode(u)),m.appendChild(p),r.appendChild(m);var g=document.createElement("div");g.className="parallax";var v=document.createElement("img");v.style.background="url('images/filter.png'),url(images/bg/bgPerfil.jpg)",g.appendChild(v),r.appendChild(g),d.appendChild(r);var y=document.createElement("div");y.className="center col s12",y.style.margin="0.5em";var f=document.createElement("a");f.className="waves-effect waves-light btn btn-large btn-xl green darken-1",f.appendChild(document.createTextNode("+ Adicionar uma obra")),f.addEventListener("click",function(){obraEditar=void 0,pagina.abrirPaginas("addObra")}),y.appendChild(f),d.appendChild(y);var h=document.createElement("div");h.id="tabDiv",h.className="row";var E=document.createElement("div");E.className="col s12";var N=document.createElement("ul");N.className="tabs";var b=document.createElement("li");b.className="tab col s3";var C=document.createElement("a");C.href="#test1",C.className="teal-text",C.className="active",C.appendChild(document.createTextNode("Pendentes")),b.appendChild(C),N.appendChild(b);var P=document.createElement("li");P.className="tab col s3";var T=document.createElement("a");T.href="#test2",T.style.color="#029688",T.appendChild(document.createTextNode("Andamento")),P.appendChild(T),N.appendChild(P);var B=document.createElement("li");B.className="tab col s3";var w=document.createElement("a");w.href="#test3",w.style.color="#029688",w.appendChild(document.createTextNode("Concluídas")),B.appendChild(w),N.appendChild(B),E.appendChild(N),h.appendChild(E);var I=document.createElement("div");I.id="test1",I.className="col s12",h.appendChild(I);var x=document.createElement("div");x.className="col s12",x.id="test2",h.appendChild(x);var S=document.createElement("div");S.className="col s12",S.id="test3",h.appendChild(S),d.appendChild(h),pagina.getPagina().appendChild(d),$("ul.tabs").tabs(),$(".parallax").parallax();var k=new HttpReq("POST",pagina.apiUrl()+"tags",function(e){tags=JSON.parse(e).result,console.log("Lista de tags disponíveis: "+tags)});k.enviar();var k=new HttpReq("POST",pagina.apiUrl()+"obra/buscar",function(e){if(e&&(e=JSON.parse(e),e.length>0)){document.getElementById("test1").innerHTML="",document.getElementById("test2").innerHTML="",document.getElementById("test3").innerHTML="";for(var t=0;t<e.length;t++){var a=new Obra;a.json(e[t]),console.log(e[t]),"criada"==a.getAndamento()?(console.log(a),console.log(t),pag.addListaPendente(a,t),console.log("bbbbbbbb")):"iniciada"==a.getAndamento()||"pausada"==a.getAndamento()?pag.addListaAndamento(a,t):"concluida"==a.getAndamento()||"interrampida"==a.getAndamento()?pag.addListaConcluida(a,t):console.log("Erro - andamento da obra não existe: Obra -> "+a.jsonString())}}});k.enviar();var l=new Usuario;if(l.json(window.localStorage.getItem("usuario")),l&&l.getPrestadorServico()){var A=new Array,L=new HttpReq("POST",pagina.apiUrl()+"relacaoObra/buscarRelacoesObraDoPrestador",function(e){if(e){e=JSON.parse(e);var t;if(e.result.length>0)for(var a=0;a<e.result.length;a++)t=new RelacaoObra,t.json(e.result[a]),A.push(t)}var n=new HttpReq("POST",pagina.apiUrl()+"obra/buscarObrasComIds",function(e){if(e){e=JSON.parse(e);var t=new RelacaoObra;if(e.result.length>0)for(var a,n=0;n<e.result.length;n++)console.log("* obra"),a=new Obra,a.json(e.result[n]),t.json(A[n]),"rejeitada"!=t.getEstado()&&("criada"==a.getAndamento()?pag.addListaPendente(a,n,A[n]):"iniciada"==a.getAndamento()||"pausada"==a.getAndamento()?pag.addListaAndamento(a,n,A[n]):"concluida"==a.getAndamento()||"interrampida"==a.getAndamento()?pag.addListaConcluida(a,n,A[n]):console.log("Erro - andamento da obra não existe: Obra -> "+a.jsonString()))}});if(A.length>0){for(var o,i=new Array,l=0;l<A.length;l++)o=A[l],i.push(o.getIdObra());n.enviar("obraIds="+JSON.stringify(i))}});L.enviar("idUsuarioPrestador="+l.getId())}}else pagina.abrirPaginas("login")},this.abrirObra=function(e){e&&(window.localStorage.setItem("obra",e.jsonString()),pagina.abrirPaginas("obra"))},this.addListaPendente=function(t,a,n){var o=" ";o=t.getNome();var i="";n&&(o=t.getNome(),i=n.getEstado());var l="images/fulano2.png";t.getFoto()&&(l=pagina.uploadedObraImages()+t.getFoto()),e.push(t);var d=document.createElement("div");d.className="row card pointer",d.style.height="5em",d.style.background="url('images/filter.png'),url("+l+")",d.style.backgroundSize="cover",d.addEventListener("click",function(){n&&window.localStorage.setItem("parceiroConsultarObra",n.jsonString()),pag.abrirObra(t)});var r=document.createElement("div");r.className="col s3";var c=document.createElement("img");c.src=l,c.className="responsive-img",c.style.margin="0.6em 0em",r=document.createElement("div"),r.className="col s9";var s=document.createElement("p");s.className="white-text",s.style.fontWeight="bold",s.style.margin="1em 0em",s.appendChild(document.createTextNode(o)),r.appendChild(s);var s=document.createElement("p");s.className="white-text",s.style.fontWeight="bold",s.style.margin="1em 0em",s.style.fontSize="0.8em",s.appendChild(document.createTextNode(i)),r.appendChild(s),d.appendChild(r),document.getElementById("test1").appendChild(d)},this.addListaAndamento=function(e,a,n){var o=" ";o=e.getNome();var i="";n&&(i=n.getEstado(),o=e.getNome()+" : Relacao Obra");var l="images/fulano2.png";e.getFoto()&&(l=pagina.uploadedObraImages()+e.getFoto()),t.push(e);var d=document.createElement("div");d.className="row card pointer",d.style.height="5em",d.style.background="url('images/filter.png'),url("+l+")",d.style.backgroundSize="cover",d.addEventListener("click",function(){n&&window.localStorage.setItem("parceiroConsultarObra",n.jsonString()),pag.abrirObra(e)});var r=document.createElement("div");r.className="col s3";var c=document.createElement("img");c.src=l,c.className="responsive-img circle",c.style.margin="0.6em 0em",r.appendChild(c),r=document.createElement("div"),r.className="col s6";var s=document.createElement("p");s.style.margin="1em 0em",s.style.fontWeight="bold",s.className="white-text",s.appendChild(document.createTextNode(o)),r.appendChild(s);var s=document.createElement("p");s.style.margin="1em 0em",s.style.fontWeight="bold",s.style.fontSize="0.8em",s.className="white-text",s.appendChild(document.createTextNode(i)),r.appendChild(s),d.appendChild(r),document.getElementById("test2").appendChild(d)},this.addListaConcluida=function(e,t,n){var o=" ";o=e.getNome();var i="";n&&(i=n.getEstado(),o=e.getNome()+" : Relacao Obra");var l="images/fulano2.png";e.getFoto()&&(l=pagina.uploadedObraImages()+e.getFoto()),a.push(e);var d=document.createElement("div");d.className="row card pointer",d.style.background="url('images/filter.png'),url("+l+")",d.style.backgroundSize="cover",d.addEventListener("click",function(){n&&window.localStorage.setItem("parceiroConsultarObra",n.jsonString()),pag.abrirObra(e)});var r=document.createElement("div");r.className="col s3";var c=document.createElement("img");c.src=l,c.className="responsive-img circle",c.style.margin="0.6em 0em",r.appendChild(c),r=document.createElement("div"),r.className="col s6";var s=document.createElement("p");s.style.margin="1em 0em",s.style.fontWeight="bold",s.className="white-text",s.appendChild(document.createTextNode(o)),r.appendChild(s);var s=document.createElement("p");s.style.margin="1em 0em",s.style.fontSize="0.8em",s.style.fontWeight="bold",s.className="white-text",s.appendChild(document.createTextNode(i)),r.appendChild(s),d.appendChild(r),document.getElementById("test3").appendChild(d)},this.construtor()}