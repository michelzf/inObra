function PagAddObra(){this.construtor=function(){pagina.setTitle("Criar Obra"),this.montaPagHtml()},this.construtorTags=function(e,t){for(i=0;i<t.length;i++){var a=document.createElement("option");a.value=t[i],a.appendChild(document.createTextNode(t[i])),e.appendChild(a)}},this.montaPagHtml=function(){if(window.localStorage.getItem("usuario")){var e=new Array;pagina.getPagina().empty(),listaParceirosJaAdicionados=void 0,document.getElementById("btnVoltar").addEventListener("click",function(){obraEditar?pagina.abrirPaginas("obra"):pagina.abrirPaginas("main")});var t=document.createElement("main");t.className="row",t.setAttribute("style","margin-bottom: 3em !important");var a=document.createElement("div");a.className="col s12 center",a.style.margin="1em 0em";var n=document.createElement("span");n.style.fontSize="1.3em",obraEditar?n.appendChild(document.createTextNode("Editar Obra")):n.appendChild(document.createTextNode("Vamos dar início a uma nova obra :)")),a.appendChild(n),t.appendChild(a);var o=document.createElement("form");o.className="col s12";var i=document.createElement("div");i.className="row";var l=document.createElement("div");l.className="col s12";var d=document.createElement("div");d.id="imgPerfil",d.className="pointer";var r=document.createElement("div");r.className="image-upload center";var c=document.createElement("div");c.id="cadastroFotoPerfil";var s=document.createElement("img");s.id="obraImagem",s.src="images/cameraIcon.png",obraEditar&&(s.src=pagina.uploadedObraImages()+obraEditar.getFoto()),s.className="pointer",s.alt="foto",s.style.width="25%",c.appendChild(s),r.appendChild(c);var m=document.createElement("input");m.type="file",m.id="filePerfilCadastro",m.style.display="none",m.addEventListener("change",function(){var e=new FileReader;e.onload=function(e){cropEditor(150,50,"square",e.target.result)},e.readAsDataURL(document.getElementById("filePerfilCadastro").files[0]),document.getElementById("cropedImage").textContent="cadastroImg",$("#modalEditarImg").openModal()}),r.appendChild(m),r.addEventListener("click",function(){$("#filePerfilCadastro").click()}),d.appendChild(r),l.appendChild(d);var p=document.createElement("div");p.id="legendaFoto",p.className="center",p.appendChild(document.createTextNode("Clique acima para adicionar uma foto para sua nova obra.")),l.appendChild(p),i.appendChild(l),o.appendChild(i);var u=document.createElement("div");u.className="input-field col s12";var g=document.createElement("input");g.className="validate",g.type="text",g.id="nome",obraEditar&&(g.value=obraEditar.getNome()),u.appendChild(g);var v=document.createElement("label");v.htmlFor="nome",obraEditar&&(v.className="active"),v.appendChild(document.createTextNode("Nome")),u.appendChild(v),o.appendChild(u);var r=document.createElement("div");r.className="row";var f=document.createElement("div");f.className="input-field col s12";var y=document.createElement("label");y.htmlFor="data_grupo",y.className="active",y.appendChild(document.createTextNode("Data Início")),f.appendChild(y);var h=document.createElement("input");h.id="data_grupo",h.type="text",f.appendChild(h),r.appendChild(f),o.appendChild(r);var E=document.createElement("div");E.className="row";var N=document.createElement("div");N.className="input-field col s12";var b=document.createElement("input");b.id="local",b.className="validate",b.type="text",obraEditar&&(b.value=obraEditar.getLocal()),N.appendChild(b);var C=document.createElement("label");C.htmlFor="local",obraEditar&&(C.className="active"),C.appendChild(document.createTextNode("Local")),N.appendChild(C),E.appendChild(N),o.appendChild(E);var P=document.createElement("div");P.className="row";var T=document.createElement("div");T.className="input-field col s12";var B=document.createElement("select");B.id="selectTags",B.multiple="multiple";var w=document.createElement("option");w.selected="selected",w.value="",w.disabled="disabled",w.appendChild(document.createTextNode("Selecione o tipo de serviço")),B.appendChild(w),T.appendChild(B);var y=document.createElement("label");y.appendChild(document.createTextNode("Tipo de serviço")),T.appendChild(y),P.appendChild(T),o.appendChild(P);var I=document.createElement("div");I.className="row";var x=document.createElement("div");x.className="input-field col s12";var S=document.createElement("textarea");S.className="materialize-textarea",S.id="descObra",obraEditar&&(S.value=obraEditar.getDescricao()),x.appendChild(S);var k=document.createElement("label");k.htmlFor="descObra",obraEditar&&(k.className="active"),k.appendChild(document.createTextNode("Como será essa obra?")),x.appendChild(k),I.appendChild(x),o.appendChild(I),t.appendChild(o),pagina.getPagina().appendChild(t);var A=document.createElement("footer");A.setAttribute("style","bottom:-16px !important;");var L=document.createElement("div");L.className="row";var U=document.createElement("a");U.className="waves-effect waves-teal btn btn-large btn-xl white-text",obraEditar?U.appendChild(document.createTextNode("Atualizar")):U.appendChild(document.createTextNode("Próximo")),U.addEventListener("click",function(){var e=new Obra;obraEditar&&e.json(obraEditar);var t=document.getElementById("data_grupo").value;if(!t)return void alerta.abrirErro("Campo Data não preenchido.");var a=new Date,n=Math.round(a.getTimezoneOffset()/60);n=n>0&&10>n?"-0"+Math.abs(n)+":00":n>=10?"-"+Math.abs(n)+":00":0>n&&n>-10?"+0"+Math.abs(n)+":00":-10>=n?"+"+Math.abs(n)+":00":"Z",a=new Date(t+"T00:00:00.000"+n),e.setData(a);var o=document.getElementById("nome").value;if(!o)return void alerta.abrirErro("Campo nome não preenchido.");e.setNome(o);var i=document.getElementById("local").value;if(!i)return void alerta.abrirErro("Campo Local não preenchido.");e.setLocal(i);var l=$("#selectTags").val();if(!l)return void alerta.abrirErro("Campo das tags de necessidade de serviços não preenchido.");console.log("LISTA TAGS"),console.log(l),e.setListaTags(l);var d=document.getElementById("descObra").value;if(!d)return void alerta.abrirErro("Campo da descricão da obra não preenchido.");if(e.setDescricao(d),obraEditar){document.getElementById("imgFotoPerfil")?imagemObra=document.getElementById("imgFotoPerfil").src:imagemObra=void 0;var r=new HttpReq("POST",pagina.apiUrl()+"obra/atualizar",function(t){t.err?alerta(t.err):(obraEditar=void 0,window.localStorage.setItem("obra",e.jsonString()),pagina.abrirPaginas("obra"))}),c=void 0;imagemObra&&(c=pagina.dataURItoBlob(imagemObra));var s=new FormData;return s.append("obraImage",c),s.append("obra",e.jsonString()),r.enviar(s,void 0,!1),void(imagemObra=void 0)}var m=new Token(window.localStorage.getItem("token"));e.setIdUsuario(m.getUsuarioId()),e.setAndamento("criada"),window.localStorage.setItem("obraAdicionarParceiros",e.jsonString()),document.getElementById("imgFotoPerfil")?imagemObra=document.getElementById("imgFotoPerfil").src:imagemObra=void 0,pagina.abrirPaginas("escolheParceiro")}),L.appendChild(U),A.appendChild(L),pagina.getPagina().appendChild(A),$("#selectTags").material_select(),$("#selectTags").change(function(){var e=[],t=$(this),a=t.prev();a.children("li").toArray().forEach(function(a,n){$(a).hasClass("active")&&e.push(t.children("option").toArray()[n].value)}),t.val(e),console.log($(this).val())}),$("#data_grupo").bootstrapMaterialDatePicker({weekStart:0,time:!1,format:"YYYY-MM-DD"}),obraEditar&&(console.log(obraEditar.getData()),$("#data_grupo").bootstrapMaterialDatePicker("setDate",obraEditar.getData()),$("#selectTags").val(obraEditar.getListaTags()),$("select").material_select());var z=new HttpReq("POST",pagina.apiUrl()+"tags",function(t){e=JSON.parse(t),tags=JSON.parse(t).result,console.log(tags),console.log(B),pag.construtorTags(B,tags)});z.enviar()}else pagina.abrirPaginas("login")},this.construtorTags=function(e,t){for(console.log("aaaaaaaaaaa"),console.log(t),console.log(t.length),i=0;i<t.length;i++){var a=document.createElement("option");a.value=t[i],a.appendChild(document.createTextNode(t[i])),e.appendChild(a)}$("select").material_select()},this.construtor()}