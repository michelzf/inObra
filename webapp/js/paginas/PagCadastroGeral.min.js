function PagCadastroGeral(){this.construtor=function(){pagina.setTitle("Cadastro"),this.montaPagHtml()};var e;this.montaPagHtml=function(){e=new Usuario,window.localStorage.getItem("usuario")?e.json(window.localStorage.getItem("usuario"))||(e=void 0):e=void 0,window.localStorage.getItem("usuario")?document.getElementById("btnVoltar").style.display="block":document.getElementById("btnVoltar").style.display="none",document.getElementById("btnVoltar").addEventListener("click",function(){e?pagina.abrirPaginas("main"):pagina.abrirPaginas("selecionarPerfil")}),pagina.getPagina().empty();var a=document.createElement("main");a.className="row",e?a.setAttribute("style","margin-top: 5em !important"):a.setAttribute("style","margin-top: 5em !important");var t=document.createElement("form");t.className="col s12";var n=document.createElement("div");n.className="row";var l=document.createElement("div");l.className="col s12";var i=document.createElement("div");i.id="imgPerfil",i.className="pointer";var d=document.createElement("div");d.className="image-upload center";var o=document.createElement("div");o.id="cadastroFotoPerfil";var s=document.createElement("img");e&&e.getFoto()?s.src=pagina.uploadedUserImages()+e.getFoto():s.src="images/obraIcon.png",s.className="pointer",s.id="perfilAtualizarFoto",s.alt="foto",s.style.width="25%",o.appendChild(s),d.appendChild(o);var c=document.createElement("input");c.type="file",c.id="filePerfilCadastro",c.style.display="none",c.addEventListener("change",function(){var e=new FileReader;e.onload=function(e){cropEditor(100,100,"circle",e.target.result)},e.readAsDataURL(document.getElementById("filePerfilCadastro").files[0]),document.getElementById("cropedImage").textContent="cadastroImg",$("#modalEditarImg").openModal()}),d.appendChild(c),d.addEventListener("click",function(){$("#filePerfilCadastro").click()}),i.appendChild(d),l.appendChild(i);var m=document.createElement("div");m.id="legendaFoto",m.className="center",m.appendChild(document.createTextNode("Clique acima para adicionar uma foto e  deixar seu perfil bacana")),l.appendChild(m),n.appendChild(l),t.appendChild(n);var p=document.createElement("div");p.className="input-field col s12";var u=document.createElement("input");u.className="validate",u.type="text",u.id="nome",e&&(u.value=e.getNome()),p.appendChild(u);var v=document.createElement("label");v.htmlFor="nome",v.appendChild(document.createTextNode("Nome")),p.appendChild(v),e&&(v.className="active"),t.appendChild(p);var g=document.createElement("div");g.className="input-field col s12";var f=document.createElement("span");f.className="red-text",f.style.display="none",f.style.fontSize="0.8em",f.style.margin="0em",f.appendChild(document.createTextNode("Email incorreto"));var h=document.createElement("input");h.className="validate",h.type="email",h.id="email",h.addEventListener("keyup",function(){valida.email(h.value)?f.style.display="none":f.style.display="block"}),h.addEventListener("blur",function(){valida.email(h.value)?f.style.display="none":f.style.display="block"}),g.appendChild(h);var y=document.createElement("label");y.htmlFor="email",y.appendChild(document.createTextNode("Email")),g.appendChild(y),g.appendChild(f),e||t.appendChild(g);var g=document.createElement("div");g.className="input-field col s12";var E=document.createElement("span");E.className="red-text",E.style.display="none",E.style.fontSize="0.8em",E.style.margin="0em",E.appendChild(document.createTextNode("O campo senha deve conter 6 ou mais caracteres"));var C=document.createElement("input");C.className="validate",C.type="password",C.id="senha",C.addEventListener("keyup",function(){valida.senha(C.value)?E.style.display="none":E.style.display="block"}),C.addEventListener("blur",function(){valida.senha(C.value)?E.style.display="none":E.style.display="block"}),g.appendChild(C);var y=document.createElement("label");y.htmlFor="senha",y.appendChild(document.createTextNode("Senha")),g.appendChild(y),g.appendChild(E),e||t.appendChild(g);var g=document.createElement("div");g.className="input-field col s12";var N=document.createElement("span");N.className="red-text",N.style.display="none",N.style.fontSize="0.8em",N.style.margin="0em",N.appendChild(document.createTextNode("As senhas devem ser iguais"));var b=document.createElement("input");b.className="validate",b.type="password",b.id="confirmarSenha",b.addEventListener("keyup",function(){C.value!=b.value?N.style.display="block":N.style.display="none"}),b.addEventListener("blur",function(){C.value!=b.value?N.style.display="block":N.style.display="none"}),g.appendChild(b);var y=document.createElement("label");y.htmlFor="confirmarSenha",y.appendChild(document.createTextNode("Confirmar senha")),g.appendChild(y),g.appendChild(N),e||t.appendChild(g);var g=document.createElement("div");g.className="input-field col s12";var P=document.createElement("span");P.className="red-text",P.style.display="none",P.style.fontSize="0.8em",P.style.margin="0em",P.appendChild(document.createTextNode("O campo telefone deve conter apenas números"));var T=document.createElement("input");T.className="validate",T.type="text",T.id="telefone",e&&(T.value=e.getTelefone()),T.addEventListener("keyup",function(){valida.telefone(T.value)?P.style.display="none":P.style.display="block"}),T.addEventListener("blur",function(){valida.telefone(T.value)?P.style.display="none":P.style.display="block"}),g.appendChild(T);var y=document.createElement("label");y.htmlFor="telefone",y.appendChild(document.createTextNode("Telefone")),g.appendChild(y),g.appendChild(P),e&&(y.className="active"),t.appendChild(g);var g=document.createElement("div");g.className="input-field col s12";var x=document.createElement("span");x.className="red-text",x.style.display="none",x.style.fontSize="0.8em",x.style.margin="0em",x.appendChild(document.createTextNode("O CEP deve ser inserido corretamente. Ex: 00000-000"));var w=document.createElement("input");w.className="validate",w.type="text",w.id="cep",e&&(w.value=e.getCpf()),w.addEventListener("keyup",function(){valida.cep(w.value)?x.style.display="none":x.style.display="block"}),w.addEventListener("blur",function(){valida.cep(w.value)?x.style.display="none":x.style.display="block"}),g.appendChild(w);var y=document.createElement("label");y.htmlFor="cep",y.appendChild(document.createTextNode("CEP")),g.appendChild(y),g.appendChild(x),e&&(y.className="active"),t.appendChild(g);var g=document.createElement("div");g.className="input-field col s12";var I=document.createElement("input");I.className="validate",I.type="text",I.id="endereco",e&&(I.value=e.getRua()),g.appendChild(I);var y=document.createElement("label");y.htmlFor="endereco",y.appendChild(document.createTextNode("Endereço")),g.appendChild(y),e&&(y.className="active"),t.appendChild(g);var g=document.createElement("div");g.className="input-field col s12";var I=document.createElement("input");I.className="validate",I.type="text",I.id="cidade",e&&(I.value=e.getCidade()),g.appendChild(I);var y=document.createElement("label");y.htmlFor="cidade",y.appendChild(document.createTextNode("Cidade")),g.appendChild(y),e&&(y.className="active"),t.appendChild(g);var g=document.createElement("div");g.className="input-field col s12";var S=document.createElement("span");S.className="red-text",S.style.display="none",S.style.fontSize="0.8em",S.style.margin="0em",S.appendChild(document.createTextNode("O campo número deve conter apenas números"));var F=document.createElement("input");F.className="validate",F.type="number",F.id="numero",e&&(F.value=e.getNumero()),F.addEventListener("keyup",function(){valida.numero(F.value)?S.style.display="none":S.style.display="block"}),F.addEventListener("blur",function(){valida.numero(F.value)?S.style.display="none":S.style.display="block"}),g.appendChild(F);var y=document.createElement("label");y.htmlFor="numero",y.appendChild(document.createTextNode("Número")),e&&(y.className="active"),g.appendChild(y),g.appendChild(S),t.appendChild(g);var g=document.createElement("div");g.className="input-field col s12";var I=document.createElement("input");I.className="validate",I.type="text",I.id="comp",e&&(I.value=e.getComplemento()),g.appendChild(I);var y=document.createElement("label");y.htmlFor="comp",y.appendChild(document.createTextNode("Complemento")),g.appendChild(y),e&&(y.className="active"),t.appendChild(g);var d=document.createElement("div");d.className="row";var B=document.createElement("div");B.className="input-field col s12";var c=document.createElement("input");c.type="text",c.tagName="tags",c.id="tags",c.setAttribute("data-role","materialtags"),B.appendChild(c);var k=document.createElement("label");k.htmlFor="tags",k.setAttribute("style","left:0em !important"),k.appendChild(document.createTextNode("Serviços")),B.appendChild(k);var L=document.createElement("div");L.className="row";var U=document.createElement("div");U.className="input-field col s12";var A=document.createElement("select");A.multiple="multiple",A.id="selectTags";var R=document.createElement("option");R.selected="selected",R.value="",R.disabled="disabled",R.appendChild(document.createTextNode("Selecione o tipo de serviço")),A.appendChild(R),U.appendChild(A);var y=document.createElement("label");y.appendChild(document.createTextNode("Tipo de serviço")),U.appendChild(y),L.appendChild(U),e&&e.getPrestadorServico()&&t.appendChild(L);var O=document.createElement("div");O.className="input-field col s12";var j=document.createElement("input");j.className="validate",j.type="text",j.id="cpf",O.appendChild(j);var z=document.createElement("label");z.htmlFor="cpf",z.appendChild(document.createTextNode("CPF")),O.appendChild(z),d.appendChild(O),e&&e.getPrestadorServico()&&t.appendChild(d);var V=document.createElement("div");V.className="row";var H=document.createElement("div");H.className="input-field col s12";var q=document.createElement("textarea");q.className="materialize-textarea",q.id="descParceiro",H.appendChild(q);var _=document.createElement("label");_.htmlFor="descObra",_.appendChild(document.createTextNode("Faça uma descrição do seu serviço")),H.appendChild(_),V.appendChild(H),e&&e.getPrestadorServico()&&t.appendChild(V),$("#selectTags").material_select(),$("#selectTags").change(function(){var e=[],a=$(this),t=a.prev();t.children("li").toArray().forEach(function(t,n){$(t).hasClass("active")&&e.push(a.children("option").toArray()[n].value)}),a.val(e),console.log($(this).val())}),e&&e.getPrestadorServico()&&($("#selectTags").val(e.getTags()),$("select").material_select()),a.appendChild(t),pagina.getPagina().appendChild(a);var D=document.createElement("div");D.className="container";var J=document.createElement("div");J.className="row center";var G=document.createElement("a");G.className="waves-effect waves-light btn btn-large btn-xl",e?G.appendChild(document.createTextNode("Atualizar")):G.appendChild(document.createTextNode("Próximo")),G.addEventListener("click",function(){var a,t;e?(a="aaaaa@inopus.com.br",t="123456"):(a=document.getElementById("email").value,t=document.getElementById("senha").value);var n=new Usuario;if(n.setEmail(a))if(n.setNome(document.getElementById("nome").value))if(n.setSenha(t))if(n.setTelefone(document.getElementById("telefone").value))if(n.setRua(document.getElementById("endereco").value))if(n.setNumero(document.getElementById("numero")))if(n.setComplemento(document.getElementById("comp").value))if(n.setCep(document.getElementById("cep").value)){if(e){var l=new Usuario;l.json(window.localStorage.getItem("usuario")),n.setFoto(l.getFoto()),n.setId(e.getId());var d,i=new HttpReq("post",pagina.apiUrl()+"usuario/atualizar",function(e){if(e.err)alerta.abrirErro(e.err);else{e=JSON.parse(e);var a=new Usuario;a.json(window.localStorage.getItem("usuario"));var t=a.getFoto();e.imageFileName&&(t=e.imageFileName),a.setNome(n.getNome()),a.setTelefone(n.getTelefone()),a.setRua(n.getRua()),a.setNumero(n.getNumero()),a.setComplemento(n.getComplemento()),a.setCep(n.getCep()),a.setFoto(t),console.log("result"),console.log(e.imageFileName),window.localStorage.setItem("usuario",a.jsonString()),pagina.abrirPaginas("main")}});d=document.getElementById("imgFotoPerfil")?pagina.dataURItoBlob(document.getElementById("imgFotoPerfil").src):void 0;var o=new FormData;return o.append("userImage",d),o.append("usuario",n.jsonString(!0)),void i.enviar(o)}if("prestador"==localStorage.getItem("controle")){if(n.setPrestadorServico(!0)){if(console.log("Cadastro geral ira passar esse usuario para a proxima página:"),console.log(n),window.localStorage.setItem("cadastrarPrestador",n.jsonString(!0)),!document.getElementById("imgFotoPerfil"))return void alerta.abrirErro("Necessário escolher uma foto para o perfil.");localStorage.setItem("controle",pagina.dataURItoBlob(document.getElementById("imgFotoPerfil").src)),pagina.abrirPaginas("cadastroParceiro")}}else{var i=new HttpReq("post",pagina.apiUrl()+"usuario/cadastrar/1",function(e){if("string"==typeof e&&(e=JSON.parse(e)),e.err)1111==e.err?alerta.abrirErro("Esse e-mail já está em uso."):alerta.abrirErro(e.err);else{r=e;var a=new Token(e.result);void 0!=a.getSeq()&&void 0!=a.getUsuarioId()?(alerta.abrirSucesso("Usuário cadastrado com sucesso"),localStorage.setItem("token",a.jsonString()),n.setId(a.getUsuarioId()),e.usuario.foto&&n.setFoto(e.usuario.foto),localStorage.setItem("usuario",n.jsonString(!0)),pagina.abrirPaginas("main")):alerta.abrirErro("Não foi possível entrar no aplicativo. Tente novamente mais tarde.")}});if(!document.getElementById("imgFotoPerfil"))return void alerta.abrirErro("Necessário escolher uma foto para o perfil.");var d=pagina.dataURItoBlob(document.getElementById("imgFotoPerfil").src),o=new FormData;o.append("userImage",d),o.append("usuario",n.jsonString(!0)),i.enviar(o)}}else alert("numero invalido");else alert("complemento invalido");else alert("numero invalido");else alert("endereço inválido");else alert("telefone invalido");else alert("senha inválida");else alert("nome inválido");else alert("email invalido")}),J.appendChild(G),D.appendChild(J);var M=document.createElement("div");M.className="col s12 center";var K=document.createElement("a");K.className="waves-effect waves-teal btn-flat teal-text",e||K.appendChild(document.createTextNode("Voltar")),K.addEventListener("click",function(){pagina.abrirPaginas("selecionarPerfil")}),M.appendChild(K),D.appendChild(M),pagina.getPagina().appendChild(D);var Q=new HttpReq("POST",pagina.apiUrl()+"tags",function(e){tags=JSON.parse(e).result,console.log(tags),pag.construtorTags(A,tags)});Q.enviar(),$("select").material_select()},this.construtorTags=function(e,a){for(i=0;i<a.length;i++){var t=document.createElement("option");t.value=a[i],t.appendChild(document.createTextNode(a[i])),e.appendChild(t)}},this.construtor()}